replicaCount: 2

image:
  repository: my-registry/python-api
  tag: v1.0.0
  pullPolicy: IfNotPresent

service:
  type: NodePort
  port: 80
  targetPort: 8000

ingress:
  enabled: true
  className: nginx
  host: api.dev.local
  path: /

  # Load balancing & Performance
  rateLimit: 100 # Requests per second per IP
  maxConnections: 50 # Max concurrent connections per IP
  maxBodySize: 10m # Max request body size

  # Timeouts (seconds)
  proxyConnectTimeout: 60
  proxySendTimeout: 60
  proxyReadTimeout: 60

  # CORS configuration
  cors:
    enabled: true
    allowOrigin: "*" # Change to specific domains in production
    allowMethods: "GET, POST, PUT, DELETE, OPTIONS, PATCH"
    allowHeaders: "DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization"

  # TLS/SSL configuration
  tls:
    enabled: false # Set to true in production
    issuer: letsencrypt-prod # cert-manager cluster issuer

  # Custom annotations (optional)
  annotations:
    {}
    # nginx.ingress.kubernetes.io/whitelist-source-range: "10.0.0.0/8"
    # nginx.ingress.kubernetes.io/auth-type: basic
    # nginx.ingress.kubernetes.io/auth-secret: basic-auth

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 256Mi

env:
  APP_ENV: dev

secret:
  DATABASE_URL: postgres://user:pass@db

hpa:
  enabled: true
  minReplicas: 2
  maxReplicas: 5
  cpuUtilization: 70
